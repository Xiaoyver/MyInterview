# 扫盲-3

## Java异常

```
┌─────────────────────────────────────────────────────────────────────────────────────────────┐
│                                     🟦 Throwable                                           │
│                                                                                             │
├─────────────────────────────────────────────────────────────────────────────────────────────┤
│                  ┌──────────────────────────────────────────┬───────────────────────────────┤
│                  ▼                                          ▼                               │
│         ┌───────────────────────┐                  ┌───────────────────────┐                │
│         │       🟩 Exception   │                   │       🟨 Error       │                │
│         └───────────────────────┘                  └───────────────────────┘                │
│                  │                                          │                               │
├──────────────────┼──────────────────────────────────────────┼───────────────────────────────┤
│          ┌───────┴───────┐                                  ▼                               │
│          ▼               ▼                   ┌───────────────────────┐                      │
│ ┌─────────────────┐  ┌────────────────────┐  │  🔶 Error 子类        │                      │
│ │ Checked Exception│ │Unchecked Exception │  │  OutOfMemoryError     │                      │
│ │「编译时需处理」   │ │「运行时抛出」        │  │  StackOverflowError   │                      │
│ └─────────────────┘  └────────────────────┘  │  VirtualMachineError  │                      │
│          │               │                   │  AssertionError       │                      │
│          │               │                   │  IOError              │                      │
├──────────┼───────────────┼──────────────────────────────────────────────────────────────────┤
│          ▼               ▼                                                                  │
│ ┌────────────────────────────────────┐  ┌─────────────────────────────────────────────────┐ │
│ │  🔧 Checked Exception 典型子类     │  │  🔷 Unchecked Exception 典型子类                │ │
│ │  ├─ IOException                    │  │  ├─ ArithmeticException                         │ │
│ │  ├─ ClassNotFoundException         │  │  ├─ ClassCastException                          │ │
│ │  ├─ SQLException                   │  │  ├─ IllegalThreadStateException                 │ │
│ │  └─ FileNotFoundException          │  │  └─ IndexOutOfBoundsException                   │ │
│ └────────────────────────────────────┘  └─────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────────────────────────────┘
```

## Exception和Error有什么区别?

`Java`所有的异常都继承自`Throwable`类,`Exception`和Error都是`Throwable`的子类。

- `Exception`:异常,程序本身可以处理的异常,可以通过`try-catch`语句捕获并处理.`Exception`的子类有`Checked Exception`(编译时需处理)和`Unchecked Exception`(运行时抛出)两种.
- `Error`:错误,属于程序无法处理的异常,不建议通过`try-catch`语句捕获并处理(一般是系统级问题).`Error`的子类有`VirtualMachineError`(虚拟机错误),`StackOverflowError`(栈溢出错误)等.

## Checked Exception和Unchecked Exception有什么区别?

- `Checked Exception`:编译时需处理的异常,必须在代码中显式处理,否则编译错误.例如`IOException`,`SQLException`等.除了`RuntimeException`及其子类,其他的`Exception`子类都是`Checked Exception`.
- `Unchecked Exception`:运行时抛出的异常,不需要在代码中显式处理,如果不处理,程序会在运行时抛出异常.例如`NullPointerException`,`ArrayIndexOutOfBoundsException`等.

## finally 中的代码一定会执行吗?

不一定的,在某些情况下,`finally` 中的代码不会被执行.
```
业务逻辑
try {
    // 业务逻辑
    //终止当前正在运行的Java虚拟机
    System.exit(0);
} catch (Exception e) {
    // 异常处理
} finally {
    // 最终执行的代码
}   
```

**注意**:
不要在 `finally` 语句块中使用 `return`, 当 `try` 语句和 `finally` 语句中都有 `return` 语句时,`try` 语句块中的 `return` 语句会被忽略. 这是因为 `try` 语句中的 `return` 返回值会先被暂存在一个本地变量中, 当执行到 `finally` 语句中的 `return` 之后, 这个本地变量的值就变为了 `finally` 语句中的 return 返回值.