# Java 基础知识

## 1. Java SE,Java EE,Java ME

- `Java SE` (标准版) : 通俗理解就是`JDK`+`JVM`+自带`API`的实现.
  - 为`Java EE`提供了基础
  - 主要要用于开发和部署在桌面、服务器、嵌入式环境及实时环境中使用的 Java 应用程序
- `Java EE` (企业版) : 简单理解是它定义了一套规范,具体的实现依赖于各个厂商.
  - 它是以`Java SE`为基础定义的一套规范
  - 朱要用于开发和部署可移植、健壮、可伸缩且安全的服务器端 Java 应用程序.
- `Java ME` (微型版本) : 了解即可,已经废废已废废
  - 一套运行专门为嵌入式设备设计的`api`接口规范,比如机顶盒这种程序.
  - 现在很少人用这个了,已经是安卓的时代了,连我们这种小公司好多项目用`Kotlin `,部分项目图省事用`uniapp`了.

## 2. JVM,JDK,JRE

### `JVM`

`Java`虚拟机(`Java  Virtual Machine`)是指运行`Java`字节码的虚拟机.针对不同的操作系统,`JVM`都有对应的特定实现,目的是使用相同的字节码,在各个操作系统都能得到相同的运行结果. **`Java`的字节码和针对不同操作系统的`JVM`实现是`Java`"一次编译,随处可以运行”的关键点".**

`JVM`不是只有一种实现.只要能满足`JVM`的规范,任何公司和个人都可以开发自己特有的`JVM`.

**主流 JVM 实现对比**

| 实现方案       | 核心优势           | 启动速度           | 内存占用           | 运行性能(长期) | 适用场景                |
| ---------- | -------------- | -------------- | -------------- | -------- | ------------------- |
| HotSpot VM | 兼容性强、生态成熟      | 中等             | 中等             | 优秀       | 通用企业应用、大数据框架        |
| GraalVM    | 高性能、AOT 编译、多语言 | (AOT 快,JIT 中等) | (AOT 低,JIT 中等) | 最优       | 云原生、计算密集、多语言        |
| OpenJ9     | 轻量、低内存、快启动     | 快              | 低              | 良好       | 嵌入式、Serverless、边缘计算 |
| JamVM      | 极致轻量           | 较慢(仅解释)        | 极低             | 较弱       | 资源受限嵌入式设备           |
| Azul Zing  | 无停顿 GC、高可用     | 中等             | 较高             | 优秀       | 金融交易、实时系统(商业)       |

### `JRE`

`Java`运行时环境(`Java Runtime Environment`),`JRE`只包含运行`Java`程序所需的环境和类库.

### `JDK`

`Java`开发工具包(`Java Development Kit`),`JDK`是一个功能齐全的`Java`开发工具包,它包含了`JRE`,以及编译器`javac`和其他工具,如`javadoc`(文档生成器)、`jconsole`(监控工具)、`javap`(反编译工具)等,供开发者使用,用于创建和编译`Java`程序.

**关系图**

```
┌───────────────────────────────────────────────────────────────────────────────┐
│                           🟦 JDK (Java 开发工具包)                             │
│  ┌──────────────────────────────────────────────┐  ┌───────────────────────┐  │
│  │                  🟩 JRE (Java 运行时环境)    │   │  🟨 开发工具集        │  │
│  │  ┌─────────────────────────┐  ┌───────────┐  │   │ ├─ javac 源码编译器   │  │
│  │  │  🟧 JVM (Java 虚拟机)   │  │ 核心类库   │  │   │ ├─ javadoc 文档生成器 │  │
│  │  │  「字节码执行/内存管理」  │  │(java.lang/│  │   │ ├─ jdb 调试工具       │  │
│  │  └─────────────────────────┘  │ util等API)│  │   │ ├─ jar 打包工具       │  │
│  │                               └───────────┘  │   │ └─ junit 测试工具     │  │
│  │  ┌─────────────────────────────────────────┐ │   └───────────────────────┘ │
│  │  │  🔧 其他运行时依赖                      │ │                             │
│  │  │  ├─ JIT 即时编译器(热点代码优化)       │ │                             │
│  │  │  ├─ GC 垃圾回收器(自动内存回收)        │ │                             │
│  │  │  ├─ rt.jar 类库归档(核心类库打包)      │ │                             │
│  │  │  └─ 配置文件(jvm.cfg、logging.properties)│ │                             │
│  │  └─────────────────────────────────────────┘ │                              │
│  └─────────────────────────────────────────────┘                               │
└────────────────────────────────────────────────────────────────────────────────┘
```

### 注意

从 **`JDK 9` 2017 年** 发布开始,`Oracle`对`JDK`的打包结构进行了重大调整,核心变化是移除了独立的`JRE`安装包,并通过 **"模块化"(Project Jigsaw)** 重构了`JDK`内部结构,这使得传统意义上 **"`JDK` 包含独立 `JRE`"的关系不再成立,** **也无需单独区分 "开发用 JDK 和 运行用 JRE"** 的安装场景.

在引入了模块系统之后,`JDK`被重新组织成 `94` 个模块. `Java` 应用可以通过新增的 `jlink` 工具,创建出只包含所依赖的 `JDK` 模块的自定义运行时镜像.这样可以极大的减少 `Java` 运行时环境的大小.

用户可以用 `jlink` 根据自己的需求,创建一个更小的 `runtime`(运行时),而不是不管什么应用,都是同样的 `JRE`.定制的、模块化的 `Java` 运行时映像有助于简化 `Java` 应用的部署和节省内存并增强安全性和可维护性.这对于满足现代应用程序架构的需求,如虚拟化、容器化、微服务和云原生开发,是非常重要的.

**JDK 9+ JDK、JRE、JVM 关系示意图**

```
┌─────────────────────────────────────────────────────────────────────────────────────────────┐
│                           🟦 JDK (Java 开发工具包) [JDK 9+]                                 │
│                                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────────────────┐   │
│  │                     🟩 运行时相关模块（原 JRE 核心能力,现以模块形式内置）              │   │
│  │                                                                                     │   │
│  │  ┌───────────────────────────────────┐  ┌─────────────────────────────────────────┐ │   │
│  │  │          🟧 JVM (Java 虚拟机)      │  │          核心类库模块                    │ │   │
│  │  │       「字节码执行/内存管理」       │  │      (java.base/java.util etc.模块化API) │ │   │
│  │  └───────────────────────────────────┘  └─────────────────────────────────────────┘ │   │
│  │                                                                                     │   │
│  │  ┌─────────────────────────────────────────────────────────────────────────────┐    │   │
│  │  │               🔧 运行时依赖组件（原 JRE 附属能力,模块化整合）                  │   │   │
│  │  │  ├─ JIT 即时编译器（热点代码优化）                                             │   │   │
│  │  │  ├─ GC 垃圾回收器（自动内存回收）                                              │   │   │
│  │  │  ├─ 模块系统（jlink 工具依赖,用于生成定制运行时）                              │   │   │
│  │  │  └─ 配置文件（jvm.cfg、logging.properties etc.）                              │   │   │
│  │  └─────────────────────────────────────────────────────────────────────────────┘    │   │
│  └─────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                            │
│  ┌─────────────────────────────────────────────────────────────────────────────────────┐   │
│  │                     🟨 开发工具模块（原 JDK 独有,现与运行时模块分离但同属 JDK）        │   │
│  │                                                                                     │   │
│  │  ├─ javac 源码编译器（编译 .java → .class）                                           │   │
│  │  ├─ javadoc 文档生成器（从源码提取 API 文档）                                          │   │
│  │  ├─ jdb 调试工具（调试 Java 程序）                                                    │   │
│  │  ├─ jlink 定制运行时工具（按需打包模块,生成"迷你 JRE"）                                │   │
│  │  └─ jar/jmod 打包工具（打包模块或类文件）                                              │   │
│  └─────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────┘
```

## 3. Java 的字节码

在`Java`中, `JVM`可以理解的代码就叫做字节码(扩展名为.class的文件). JAVA语言通过字节码的方式在一定程度上解决了传统解释型语言执行效率低的问题。同时又保留了解释性语言可以移植的特点。所以JAVA程序运行相对来说是高效的。
