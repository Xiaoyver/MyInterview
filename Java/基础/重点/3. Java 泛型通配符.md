# Java 泛型通配符

## 泛型通配符

泛型通配符使用 `?` 来表示，它代表一个未知的类型.当我们在代码中使用泛型通配符时，意味着我们并不关心具体的类型是什么，只关心它是某种类型的实例.例如，`List<?>` 表示一个元素类型未知的 `List`.

## 上界通配符 `? extends`

上界通配符 `? extends` 用于限制通配符所代表的类型必须是某个特定类型的子类型（包括该特定类型本身）.例如，`List<? extends Number>` 表示这个 `List` 中的元素类型必须是 `Number` 的子类型，如 `Integer`、`Double` 等.

## 下界通配符 `? super`
下界通配符 `? super` 用于限制通配符所代表的类型必须是某个特定类型的超类型（包括该特定类型本身）.例如，`List<? super Integer>` 表示这个 `List` 中的元素类型必须是 `Integer` 的超类型，如 `Number`、`Object` 等.

## 读取和写入操作与通配符

使用上界通配符 `? extends` 的泛型集合主要用于读取操作，因为我们无法确定具体的元素类型，所以不能安全地向其中添加元素（除了 `null`）.例如:
```java
import java.util.ArrayList;
import java.util.List;

public class ReadWriteWithWildcards {
    public static void main(String[] args) {
        List<? extends Number> list = new ArrayList<>();
        // list.add(new Integer(1)); // 编译错误
        Number number = list.get(0); // 可以读取
    }
}
```

而使用下界通配符 ? super 的泛型集合主要用于写入操作，因为我们知道元素类型是某个特定类型的超类型，所以可以安全地向其中添加该特定类型或其子类型的元素.例如:

```java
import java.util.ArrayList;
import java.util.List;

public class LowerBoundWriteExample {
    public static void main(String[] args) {
        List<? super Integer> list = new ArrayList<>();
        list.add(1); // 可以写入
    }
}
```

在方法参数中使用通配符可以使方法更加通用.例如，我们可以定义一个方法来打印任何类型的 `List`:
```java
import java.util.List;

public class WildcardMethodParameter {
    public static void printList(List<?> list) {
        for (Object element : list) {
            System.out.println(element);
        }
    }

    public static void main(String[] args) {
        List<Integer> integerList = new ArrayList<>();
        integerList.add(1);
        integerList.add(2);

        List<String> stringList = new ArrayList<>();
        stringList.add("Hello");
        stringList.add("World");

        printList(integerList);
        printList(stringList);
    }
}
```

## 何时使用通配符

- 提高代码通用性:当你需要编写一个方法或类，它能够处理多种不同类型参数的泛型集合时，使用通配符可以使代码更加通用.
- 遵循 `PECS` 原则:生产者 - 扩展（`PECS`）原则是使用通配符的一个重要指导原则.如果一个泛型集合主要用于读取数据，使用上界通配符 `? extends`;如果主要用于写入数据，使用下界通配符 `? super`.